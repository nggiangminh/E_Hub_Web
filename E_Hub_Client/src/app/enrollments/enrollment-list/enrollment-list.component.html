<!-- Enrollment List Component -->
<div class="enrollment-page">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Má»¤C Lá»¤C KHÃ“A Há»ŒC</h1>
      <p class="page-subtitle">Quáº£n lÃ½ cÃ¡c khÃ³a há»c báº¡n Ä‘Ã£ Ä‘Äƒng kÃ½</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" routerLink="/courses">
        <i class="icon">ğŸ“š</i>
        KHÃM PHÃ KHÃ“A Há»ŒC
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card active">
      <div class="stat-icon">ğŸ¯</div>
      <div class="stat-info">
        <div class="stat-number">{{ enrollmentStats.active }}</div>
        <div class="stat-label">ACTIVE</div>
      </div>
    </div>
    <div class="stat-card completed">
      <div class="stat-icon">ğŸ†</div>
      <div class="stat-info">
        <div class="stat-number">{{ enrollmentStats.completed }}</div>
        <div class="stat-label">COMPLETED</div>
      </div>
    </div>
    <div class="stat-card progress">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-info">
        <div class="stat-number">{{ enrollmentStats.totalProgress }}%</div>
        <div class="stat-label">TIáº¾N Äá»˜CH CHUNG</div>
      </div>
    </div>
    <div class="stat-card time">
      <div class="stat-icon">â°</div>
      <div class="stat-info">
        <div class="stat-number">{{ enrollmentStats.totalHours }}h</div>
        <div class="stat-label">Tá»”NG THá»œI GIAN</div>
      </div>
    </div>
  </div>

  <!-- Filter and Search -->
  <div class="filter-section">
    <div class="search-container">
      <input
        type="text"
        class="search-input"
        placeholder="TÃ¬m kiáº¿m khÃ³a há»c..."
        [(ngModel)]="searchTerm"
        (input)="filterEnrollments()"
      >
      <button class="search-btn">
        <i class="icon">ğŸ”</i>
      </button>
    </div>

    <div class="filter-controls">
      <select class="filter-select" [(ngModel)]="statusFilter" (change)="filterEnrollments()">
        <option value="">Táº¤T Cáº¢ TRáº NG THÃI</option>
        <option value="ACTIVE">ACTIVE</option>
        <option value="COMPLETED">COMPLETED</option>
      </select>

      <select class="filter-select" [(ngModel)]="progressFilter" (change)="filterEnrollments()">
        <option value="">Táº¤T Cáº¢ TIáº¾N Äá»˜</option>
        <option value="0-25">0-25%</option>
        <option value="25-50">25-50%</option>
        <option value="50-75">50-75%</option>
        <option value="75-100">75-100%</option>
      </select>

      <select class="filter-select" [(ngModel)]="sortBy" (change)="sortEnrollments()">
        <option value="enrolledAt">Má»šI NHáº¤T</option>
        <option value="progress">TIáº¾N Äá»˜</option>
        <option value="title">TÃŠN KHÃ“A Há»ŒC</option>
        <option value="lastAccessed">TRUY Cáº¬P Gáº¦N ÄÃ‚Y</option>
      </select>
    </div>
  </div>

  <!-- Enrollment Grid -->
  <div class="enrollment-grid" *ngIf="filteredEnrollments.length > 0">
    <div
      class="enrollment-card"
      *ngFor="let enrollment of paginatedEnrollments"
      [class.active]="enrollment.status === 'ACTIVE'"
      [class.completed]="enrollment.status === 'COMPLETED'"
    >
      <!-- Course Thumbnail -->
      <div class="course-thumbnail">
        <img [src]="enrollment.course.thumbnail" [alt]="enrollment.course.title">
        <div class="course-badge" [class]="enrollment.status.toLowerCase()">
          {{ enrollment.status === 'ACTIVE' ? 'ACTIVE' : 'COMPLETED' }}
        </div>
        <div class="progress-overlay">
          <div class="progress-circle">
            <svg class="progress-ring" width="60" height="60">
              <circle
                class="progress-ring-circle"
                stroke="currentColor"
                stroke-width="4"
                fill="transparent"
                r="26"
                cx="30"
                cy="30"
                [style.stroke-dasharray]="2 * Math.PI * 26"
                [style.stroke-dashoffset]="2 * Math.PI * 26 * (1 - enrollment.progress / 100)"
              />
            </svg>
            <span class="progress-text">{{ enrollment.progress }}%</span>
          </div>
        </div>
      </div>

      <!-- Course Info -->
      <div class="course-info">
        <h3 class="course-title">{{ enrollment.course.title }}</h3>
        <p class="course-instructor">{{ enrollment.course.instructor }}</p>
        
        <div class="enrollment-meta">
          <div class="meta-item">
            <i class="icon">ğŸ“…</i>
            <span>ÄÄƒng kÃ½: {{ formatDate(enrollment.enrolledAt) }}</span>
          </div>
          <div class="meta-item" *ngIf="enrollment.lastAccessed">
            <i class="icon">ğŸ‘ï¸</i>
            <span>Truy cáº­p: {{ formatDate(enrollment.lastAccessed) }}</span>
          </div>
          <div class="meta-item">
            <i class="icon">ğŸ“š</i>
            <span>{{ enrollment.completedLessons }}/{{ enrollment.totalLessons }} bÃ i há»c</span>
          </div>
          <div class="meta-item">
            <i class="icon">â±ï¸</i>
            <span>{{ enrollment.studyTime }} giá» há»c</span>
          </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-section">
          <div class="progress-info">
            <span class="progress-label">Tiáº¿n Ä‘á»™ hoÃ n thÃ nh</span>
            <span class="progress-percentage">{{ enrollment.progress }}%</span>
          </div>
          <div class="progress-bar">
            <div
              class="progress-fill"
              [style.width.%]="enrollment.progress"
            ></div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button
            class="btn btn-primary"
            [routerLink]="['/enrollments', enrollment.id]"
          >
            <i class="icon">ğŸ“–</i>
            XEM CHI TIáº¾T
          </button>
          <button
            class="btn btn-secondary"
            [routerLink]="['/courses', enrollment.course.id, 'lessons', enrollment.nextLessonId]"
            *ngIf="enrollment.status === 'ACTIVE' && enrollment.nextLessonId"
          >
            <i class="icon">â–¶ï¸</i>
            TIáº¾P Tá»¤C Há»ŒC
          </button>
          <button
            class="btn btn-accent"
            [routerLink]="['/courses', enrollment.course.id]"
          >
            <i class="icon">ğŸ </i>
            TRANG KHÃ“A Há»ŒC
          </button>
          <button
            class="btn btn-outline"
            (click)="toggleFavorite(enrollment)"
          >
            <i class="icon">{{ enrollment.isFavorite ? 'â¤ï¸' : 'ğŸ¤' }}</i>
            {{ enrollment.isFavorite ? 'Bá» YÃŠU THÃCH' : 'YÃŠU THÃCH' }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="filteredEnrollments.length === 0">
    <div class="empty-icon">ğŸ“š</div>
    <h3 class="empty-title">CHÆ¯A CÃ“ KHÃ“A Há»ŒC NÃ€O</h3>
    <p class="empty-message">
      <span *ngIf="searchTerm || statusFilter || progressFilter">
        KhÃ´ng tÃ¬m tháº¥y khÃ³a há»c nÃ o phÃ¹ há»£p vá»›i bá»™ lá»c cá»§a báº¡n.
      </span>
      <span *ngIf="!searchTerm && !statusFilter && !progressFilter">
        Báº¡n chÆ°a Ä‘Äƒng kÃ½ khÃ³a há»c nÃ o. HÃ£y khÃ¡m phÃ¡ cÃ¡c khÃ³a há»c thÃº vá»‹!
      </span>
    </p>
    <button class="btn btn-primary" routerLink="/courses">
      <i class="icon">ğŸ”</i>
      KHÃM PHÃ KHÃ“A Há»ŒC
    </button>
  </div>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="filteredEnrollments.length > itemsPerPage">
    <div class="pagination-info">
      Hiá»ƒn thá»‹ {{ (currentPage - 1) * itemsPerPage + 1 }}-{{ Math.min(currentPage * itemsPerPage, filteredEnrollments.length) }}
      trong tá»•ng sá»‘ {{ filteredEnrollments.length }} khÃ³a há»c
    </div>
    <div class="pagination">
      <button
        class="btn btn-outline"
        [disabled]="currentPage === 1"
        (click)="goToPage(currentPage - 1)"
      >
        â—€ï¸ TRÆ¯á»šC
      </button>
      <button
        class="btn"
        *ngFor="let page of getPageNumbers()"
        [class.active]="page === currentPage"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
      <button
        class="btn btn-outline"
        [disabled]="currentPage === totalPages"
        (click)="goToPage(currentPage + 1)"
      >
        SAU â–¶ï¸
      </button>
    </div>
  </div>

  <!-- Quick Actions Floating Menu -->
  <div class="quick-actions" [class.open]="showQuickActions">
    <button
      class="quick-action-toggle"
      (click)="showQuickActions = !showQuickActions"
    >
      <i class="icon">{{ showQuickActions ? 'âœ•' : 'âš¡' }}</i>
    </button>
    <div class="quick-action-items">
      <button class="quick-action" (click)="exportProgress()">
        <i class="icon">ğŸ“Š</i>
        <span>Xuáº¥t bÃ¡o cÃ¡o</span>
      </button>
      <button class="quick-action" routerLink="/enrollments/history">
        <i class="icon">ğŸ“œ</i>
        <span>Lá»‹ch sá»­ Ä‘Äƒng kÃ½</span>
      </button>
      <button class="quick-action" (click)="resetFilters()">
        <i class="icon">ğŸ”„</i>
        <span>Äáº·t láº¡i bá»™ lá»c</span>
      </button>
    </div>
  </div>
</div>