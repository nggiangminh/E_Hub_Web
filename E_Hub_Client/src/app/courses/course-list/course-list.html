<!-- Course List Template -->
<div class="course-list-container">
  <!-- Decorative Elements -->
  <div class="geometric-decoration decoration-1"></div>
  <div class="geometric-decoration decoration-2"></div>
  <div class="geometric-decoration decoration-3"></div>

  <!-- Header Section -->
  <div class="course-header">
    <div class="header-content">
      <h1 class="page-title">ğŸ“š KhÃ³a há»c</h1>
      <p class="page-subtitle">KhÃ¡m phÃ¡ vÃ  tham gia cÃ¡c khÃ³a há»c cháº¥t lÆ°á»£ng cao</p>
    </div>
    
    <div class="header-actions">
      <button type="button" 
              class="btn btn-primary"
              routerLink="/courses/new">
        <span class="btn-icon">â•</span>
        Táº¡o khÃ³a há»c má»›i
      </button>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-filter-section">
    
    <!-- Search Bar -->
    <div class="search-container">
      <input type="text" 
             [(ngModel)]="searchQuery"
             (ngModelChange)="onSearch()"
             class="search-input"
             placeholder="ğŸ” TÃ¬m kiáº¿m khÃ³a há»c theo tÃªn hoáº·c tÃ¡c giáº£...">
    </div>

    <!-- Filters -->
    <div class="filters-container">
      <div class="filter-group">
        <label class="filter-label">Má»©c Ä‘á»™:</label>
        <select [(ngModel)]="selectedLevel" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="">Táº¥t cáº£ má»©c Ä‘á»™</option>
          <option value="BEGINNER">CÆ¡ báº£n</option>
          <option value="INTERMEDIATE">Trung cáº¥p</option>
          <option value="ADVANCED">NÃ¢ng cao</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Tráº¡ng thÃ¡i:</label>
        <select [(ngModel)]="selectedStatus" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="">Táº¥t cáº£ tráº¡ng thÃ¡i</option>
          <option value="DRAFT">NhÃ¡p</option>
          <option value="PUBLISHED">ÄÃ£ xuáº¥t báº£n</option>
          <option value="ARCHIVED">ÄÃ£ lÆ°u trá»¯</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">GiÃ¡:</label>
        <select [(ngModel)]="selectedPriceRange" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="">Táº¥t cáº£ giÃ¡</option>
          <option value="free">Miá»…n phÃ­</option>
          <option value="0-500000">DÆ°á»›i 500,000â‚«</option>
          <option value="500000-1000000">500,000â‚« - 1,000,000â‚«</option>
          <option value="1000000+">TrÃªn 1,000,000â‚«</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Sáº¯p xáº¿p:</label>
        <select [(ngModel)]="sortBy" (ngModelChange)="onSortChange()" class="filter-select">
          <option value="newest">Má»›i nháº¥t</option>
          <option value="oldest">CÅ© nháº¥t</option>
          <option value="price-low">GiÃ¡ tháº¥p Ä‘áº¿n cao</option>
          <option value="price-high">GiÃ¡ cao Ä‘áº¿n tháº¥p</option>
          <option value="name-az">TÃªn A-Z</option>
          <option value="name-za">TÃªn Z-A</option>
        </select>
      </div>
    </div>

    <!-- Statistics -->
    <div class="stats-container">
      <div class="stat-card">
        <span class="stat-number">{{ totalCourses }}</span>
        <span class="stat-label">Tá»•ng khÃ³a há»c</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ publishedCourses }}</span>
        <span class="stat-label">ÄÃ£ xuáº¥t báº£n</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ freeCourses }}</span>
        <span class="stat-label">Miá»…n phÃ­</span>
      </div>
    </div>
  </div>

  <!-- Course Grid -->
  <div class="courses-grid" *ngIf="!isLoading">
    <div *ngFor="let course of courses; trackBy: trackByCourseId" class="course-card">
      
      <!-- Course Thumbnail -->
      <div class="course-thumbnail">
        <img [src]="course.thumbnailUrl || defaultThumbnail" 
             [alt]="course.title" 
             class="thumbnail-image">
        
        <!-- Status Badge -->
        <div class="status-badge" [class]="'status-' + course.status.toLowerCase()">
          {{ getStatusDisplay(course.status) }}
        </div>

        <!-- Price Badge -->
        <div class="price-badge">
          {{ course.price === 0 ? 'Miá»…n phÃ­' : formatPrice(course.price) }}
        </div>
      </div>

      <!-- Course Info -->
      <div class="course-info">
        
        <!-- Level Badge -->
        <div class="level-badge" [class]="'level-' + course.level.toLowerCase()">
          {{ getLevelDisplay(course.level) }}
        </div>

        <h3 class="course-title">{{ course.title }}</h3>
        
        <p class="course-description">{{ truncateText(course.description, 100) }}</p>

        <!-- Course Meta -->
        <div class="course-meta">
          <div class="meta-item">
            <span class="meta-icon">ğŸ‘¨â€ğŸ«</span>
            <span class="meta-text">{{ course.author }}</span>
          </div>
          
          <div class="meta-item">
            <span class="meta-icon">ğŸ“…</span>
            <span class="meta-text">{{ formatDate(course.createdAt) }}</span>
          </div>
          
          <div class="meta-item">
            <span class="meta-icon">â°</span>
            <span class="meta-text">{{ formatDate(course.updatedAt) }}</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="course-actions">
          <button type="button" 
                  class="action-btn view-btn"
                  [routerLink]="['/courses', course.id]"
                  title="Xem chi tiáº¿t">
            ğŸ‘ï¸ Xem
          </button>
          
          <button type="button" 
                  class="action-btn edit-btn"
                  [routerLink]="['/courses', course.id, 'edit']"
                  title="Chá»‰nh sá»­a">
            âœï¸ Sá»­a
          </button>
          
          <button type="button" 
                  class="action-btn enroll-btn"
                  (click)="enrollCourse(course)"
                  [disabled]="course.status !== 'PUBLISHED'"
                  title="ÄÄƒng kÃ½ há»c">
            ğŸ¯ Há»c
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Äang táº£i danh sÃ¡ch khÃ³a há»c...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && courses.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ“š</div>
    <h3 class="empty-title">KhÃ´ng tÃ¬m tháº¥y khÃ³a há»c</h3>
    <p class="empty-description">
      {{ searchQuery ? 'KhÃ´ng cÃ³ káº¿t quáº£ nÃ o phÃ¹ há»£p vá»›i tÃ¬m kiáº¿m cá»§a báº¡n' : 'ChÆ°a cÃ³ khÃ³a há»c nÃ o Ä‘Æ°á»£c táº¡o' }}
    </p>
    <button type="button" class="btn btn-primary" routerLink="/courses/new">
      Táº¡o khÃ³a há»c Ä‘áº§u tiÃªn
    </button>
  </div>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="totalPages > 1">
    <button type="button" 
            class="pagination-btn"
            [disabled]="currentPage === 1"
            (click)="goToPage(currentPage - 1)">
      â† TrÆ°á»›c
    </button>
    
    <div class="page-numbers">
      <button *ngFor="let page of getPageNumbers()" 
              type="button"
              class="page-btn"
              [class.active]="page === currentPage"
              [disabled]="page === '...'"
              (click)="page !== '...' && goToPage(+page)">
        {{ page }}
      </button>
    </div>
    
    <button type="button" 
            class="pagination-btn"
            [disabled]="currentPage === totalPages"
            (click)="goToPage(currentPage + 1)">
      Sau â†’
    </button>
  </div>
</div>

<!-- Enrollment Confirmation Modal -->
<div *ngIf="showEnrollModal" class="modal-overlay" (click)="showEnrollModal = false">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2 class="modal-title">ğŸ“– XÃ¡c nháº­n Ä‘Äƒng kÃ½ há»c</h2>
    <div *ngIf="selectedCourse" class="enrollment-info">
      <img [src]="selectedCourse.thumbnailUrl || defaultThumbnail" 
           [alt]="selectedCourse.title"
           class="modal-course-image">
      
      <div class="modal-course-info">
        <h3 class="modal-course-title">{{ selectedCourse.title }}</h3>
        <p class="modal-course-author">TÃ¡c giáº£: {{ selectedCourse.author }}</p>
        <p class="modal-course-level">Má»©c Ä‘á»™: {{ getLevelDisplay(selectedCourse.level) }}</p>
        <p class="modal-course-price">
          Há»c phÃ­: {{ selectedCourse.price === 0 ? 'Miá»…n phÃ­' : formatPrice(selectedCourse.price) }}
        </p>
      </div>
    </div>
    
    <p class="modal-text">
      Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘Äƒng kÃ½ há»c khÃ³a há»c nÃ y khÃ´ng?
    </p>
    
    <div class="modal-actions">
      <button type="button" class="btn btn-secondary" (click)="showEnrollModal = false">
        Há»§y bá»
      </button>
      <button type="button" class="btn btn-primary" (click)="confirmEnrollment()">
        XÃ¡c nháº­n Ä‘Äƒng kÃ½
      </button>
    </div>
  </div>
</div>